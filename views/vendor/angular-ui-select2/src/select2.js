angular.module("ui.select2",[]).value("uiSelect2Config",{}).directive("uiSelect2",["uiSelect2Config","$timeout",function(e,t){var i={};return e&&angular.extend(i,e),{require:"ngModel",priority:1,compile:function(e,n){var l,a,r,u=e.is("select"),s=angular.isDefined(n.multiple);return e.is("select")&&(a=e.find("option[ng-repeat], option[data-ng-repeat]"),a.length&&(r=a.attr("ng-repeat")||a.attr("data-ng-repeat"),l=jQuery.trim(r.split("|")[0]).split(" ").pop())),function(e,a,r,o){var c=angular.extend({},i,e.$eval(r.uiSelect2)),g=function(e){var t;return c.simple_tags?(t=[],angular.forEach(e,function(e){t.push(e.id)})):t=e,t},d=function(e){var t=[];return e?(c.simple_tags?(t=[],angular.forEach(e,function(e){t.push({id:e,text:e})})):t=e,t):t};if(u?(delete c.multiple,delete c.initSelection):s&&(c.multiple=!0),o&&(e.$watch(n.ngModel,function(e,t){e&&e!==t&&o.$render()},!0),o.$render=function(){if(u)a.select2("val",o.$viewValue);else if(c.multiple){var e=o.$viewValue;angular.isString(e)&&(e=e.split(",")),a.select2("data",d(e))}else angular.isObject(o.$viewValue)?a.select2("data",o.$viewValue):o.$viewValue?a.select2("val",o.$viewValue):a.select2("data",null)},l&&e.$watch(l,function(e,i){angular.equals(e,i)||t(function(){a.select2("val",o.$viewValue),a.trigger("change"),e&&!i&&o.$setPristine&&o.$setPristine(!0)})}),o.$parsers.push(function(e){var t=a.prev();return t.toggleClass("ng-invalid",!o.$valid).toggleClass("ng-valid",o.$valid).toggleClass("ng-invalid-required",!o.$valid).toggleClass("ng-valid-required",o.$valid).toggleClass("ng-dirty",o.$dirty).toggleClass("ng-pristine",o.$pristine),e}),!u&&(a.bind("change",function(t){t.stopImmediatePropagation(),e.$$phase||e.$root.$$phase||e.$apply(function(){o.$setViewValue(g(a.select2("data")))})}),c.initSelection))){var $=c.initSelection;c.initSelection=function(e,t){$(e,function(e){o.$setViewValue(g(e)),t(e)})}}a.bind("$destroy",function(){a.select2("destroy")}),r.$observe("disabled",function(e){a.select2("enable",!e)}),r.$observe("readonly",function(e){a.select2("readonly",!!e)}),r.ngMultiple&&e.$watch(r.ngMultiple,function(e){r.$set("multiple",!!e),a.select2(c)}),t(function(){a.select2(c),a.val(o.$viewValue),o.$render(),c.initSelection||u||o.$setViewValue(g(a.select2("data")))})}}}}]);